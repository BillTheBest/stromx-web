<h1>Files</h1>

<div class="stromx-center-buttons">
  <div class="btn-group">
    {{#link-to 'files.new' type="button" class="btn btn-default"}}New File{{/link-to}}
    {{#link-to 'files.add' type="button" class="btn btn-default"}}Upload File{{/link-to}}
  </div>
</div>

{{outlet}}

<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Status</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {{#each file in this itemController="file"}}
      <tr>
        <td>
          {{file.name}}
        </td>
        <td>
          {{#if file.closed}}
            Closed
          {{else}}
            Loaded
          {{/if}}
        </td>
        <td>
          {{#if file.closed}}
            <div class="btn-group">
              <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                Action <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li><a {{action "open" file}}>Open</a></li>
                <li><a {{action "rename" file}}>Rename</a></li>
                <li><a {{action "showModal" "removeFile"  file}}>Remove</a></li>
                <li><a {{bind-attr href=file.url}} download>Download</a></li>
              </ul>
            </div>
          {{else}}
            <div class="btn-group">
              <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                Action <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                {{#if file.stream}}
                  <li>{{#link-to 'stream' file.stream}}Show{{/link-to}}</li>
                {{/if}}
                <li><a {{bind-attr href=file.url}}>Download</a></li>
              </ul>
            </div>
          {{/if}}
        </td>
      </tr>
    </tr>
    {{/each}}
  </tbody>
</table>
